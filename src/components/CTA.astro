---
import { getLocale } from 'astro-i18n-aut';
import { loadTranslations, t, getLocalizedHashLink } from '../utils/i18n';
import type { Locale } from '../i18n/types';

const locale = getLocale(Astro.url) as Locale;
const translations = await loadTranslations(locale);
const base = import.meta.env.BASE_URL;
---

<section id="download" class="py-20 px-4 sm:px-6 lg:px-8" style="background: linear-gradient(to bottom right, rgba(255, 107, 53, 0.1), var(--bg-primary), rgba(34, 197, 94, 0.1));">
	<div class="max-w-4xl mx-auto text-center">
		<h2 class="text-4xl md:text-5xl font-bold mb-6 text-bhutan-primary">
			{t('cta.title', locale, translations)}
		</h2>
		<p class="text-xl mb-8 max-w-2xl mx-auto leading-relaxed text-bhutan-secondary">
			{t('cta.subtitle', locale, translations)}
		</p>
		<div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-8">
			<a 
				href="https://play.google.com/store/apps/details?id=com.michielroos.mindstate" 
				target="_blank"
				rel="noopener noreferrer"
				class="bg-white px-8 py-4 rounded-lg text-lg font-semibold transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl flex items-center gap-3"
				style="color: var(--primary);"
			>
				<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
					<path d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.5,12.92 20.16,13.19L6.05,21.34L14.54,12.85L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z" />
				</svg>
				{t('cta.ctaDownload', locale, translations)}
			</a>
			<a 
				href={getLocalizedHashLink('#features', locale, base)}
				class="px-8 py-4 rounded-lg text-lg font-semibold border-2 transition-all bg-bhutan-primary hover:bg-bhutan-secondary text-bhutan-accent"
				style="border-color: var(--primary);"
			>
				{t('cta.ctaViewFeatures', locale, translations)}
			</a>
		</div>
		<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12 text-left">
			<div class="rounded-lg p-6 border bg-bhutan-primary" style="border-color: var(--border-light);">
				<h3 class="text-bhutan-primary font-semibold text-lg mb-2">{t('cta.benefit1.title', locale, translations)}</h3>
				<p class="text-sm text-bhutan-secondary">{t('cta.benefit1.description', locale, translations)}</p>
			</div>
			<div class="rounded-lg p-6 border bg-bhutan-primary" style="border-color: var(--border-light);">
				<h3 class="text-bhutan-primary font-semibold text-lg mb-2">{t('cta.benefit2.title', locale, translations)}</h3>
				<p class="text-sm text-bhutan-secondary">{t('cta.benefit2.description', locale, translations)}</p>
			</div>
			<div class="rounded-lg p-6 border bg-bhutan-primary" style="border-color: var(--border-light);">
				<h3 class="text-bhutan-primary font-semibold text-lg mb-2">{t('cta.benefit3.title', locale, translations)}</h3>
				<p class="text-sm text-bhutan-secondary">{t('cta.benefit3.description', locale, translations)}</p>
			</div>
		</div>
	</div>
</section>
